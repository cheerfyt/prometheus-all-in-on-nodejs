groups:
- name: Nodejs process alert
  rules:
  - alert: nodejs_process_up
    expr: (sum(up{job="my-app"}) - sum(up{job="my-app"} offset 1m )) > 0
    for: 0 
    labels:
      team: nodejs
      severity: info
    annotations:
      summary: "instance {{ $labels.instance }} process up"
      description: "{{ $value }} process up"

  - alert: nodejs_process_down
    expr: (sum(up{job="my-app"}) - sum(up{job="my-app"} offset 1m )) < 0
    for: 0
    labels:
      team: nodejs
      severity: fatal
    annotations:
      summary: "instance {{ $labels.instance }} process down"
      description: "{{ $value }} process down"